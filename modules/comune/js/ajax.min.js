/*! campi-moduli-italiani 2.1.0 */
jQuery(document).ready(function(t){"use strict";const a=wp.i18n["__"];var i,e,n,o,d,c,l,s,r,w='<option value="">'+a("Select...","campi-moduli-italiani")+"</option>",h='<option value="">'+a("Wait...","campi-moduli-italiani")+"</option>",u="",f="",p="",g="",x=typeof("function"===window.Choices),m="",y="",b="",P="gcmi_kind",M="gcmi_filtername",v="gcmi_regione",_="gcmi_province",j="gcmi_prov_desc",$="gcmi_comu_desc",k="choicesjs-select",C="gcmi_comuni",S="gcmi_icon",O="gcmi_targa",T="gcmi_info";t("select[id$='"+v+"']").val(""),t("select[id$='"+v+"']").prop("disabled",!1),t("select[id$='"+_+"']").html(w),t("select[id$='"+_+"']").attr("disabled","disabled"),t("select[id$='"+C+"']").html(w),t("select[id$='"+C+"']").attr("disabled","disabled"),t("[id$='"+S+"']").hide(),t("input[id$='"+O+"']").val(""),t("input[id$='gcmi_mail']").val(""),void 0!==t.fn.niceSelect&&(c=t("select[id*='gcmi'][style='display: none']"),l=window.MutationObserver||window.WebKitMutationObserver,s=new l(function(e){e=e[0].target,t(e).niceSelect("update")}),r={attributes:!0,characterData:!0,childList:!0,subtree:!0},c.each(function(){s.observe(this,r)})),t("select[id$='"+v+"']").on("change",function(){window.MyPrefix=this.id.substring(0,this.id.length-v.length),f=t("select#"+window.MyPrefix+v+" option:selected").attr("value"),e=t("select#"+window.MyPrefix+v+" option:selected").text(),p=t("input#"+window.MyPrefix+P).attr("value"),g=t("input#"+window.MyPrefix+M).attr("value"),t.ajax({beforeSend:function(){switch(t(this).attr("disabled","disabled"),t("input#"+window.MyPrefix+"gcmi_reg_desc").val(e),t("input#"+window.MyPrefix+j).val(""),t("input#"+window.MyPrefix+$).val(""),y=t("select#"+window.MyPrefix+_),b=t("select#"+window.MyPrefix+C),f){case"":y.html(w),b.html(w);break;case"00":y.html(h),b.html(h);break;default:y.html(h),b.html(w)}y.attr("disabled","disabled"),b.attr("disabled","disabled"),x&&y.hasClass(k)&&(t(y).data("choicesjs").setChoices(Array.from(t(y)[0].options),"value","label",!0),t(y).data("choicesjs").disable()),x&&b.hasClass(k)&&(t(b).data("choicesjs").setChoices(Array.from(t(b)[0].options),"value","label",!0),t(b).data("choicesjs").disable())},data:{action:"the_ajax_hook_prov",codice_regione:f,gcmi_filtername:g,gcmi_kind:p,nonce_ajax:gcmi_ajax.nonce},success:function(e){switch(f){case"":return y=t("select#"+window.MyPrefix+_),b=t("select#"+window.MyPrefix+C),y.html(w),b.html(w),y.attr("disabled","disabled"),void b.attr("disabled","disabled");case"00":m=t("select#"+window.MyPrefix+C);break;default:m=t("select#"+window.MyPrefix+_)}m.prop("disabled",!1),m.html(e),x&&m.hasClass(k)&&(t(m).data("choicesjs").setChoices(Array.from(t(m)[0].options),"value","label",!0),t(m).data("choicesjs").enable()),e=window.MyPrefix,2===t("#"+e+_).children("option").length?(t("#"+e+_+" option").eq(1).prop("selected",!0),t("#"+e+_).trigger("change"),t("label[for='"+e+_).hide(),t("#"+e+_).hide()):t("#"+e+_).show(),t(this).prop("disabled",!1)},type:"POST",url:gcmi_ajax.ajaxurl}),t("#"+window.MyPrefix+S).hide(),t("#"+window.MyPrefix+T).hide()}),t("select[id$='"+_+"']").on("change",function(){window.MyPrefix=this.id.substring(0,this.id.length-_.length),i=t("select#"+window.MyPrefix+_+" option:selected").attr("value"),n=t("select#"+window.MyPrefix+_+" option:selected").text(),p=t("input#"+window.MyPrefix+P).attr("value"),g=t("input#"+window.MyPrefix+M).attr("value"),t.ajax({beforeSend:function(){t(this).attr("disabled","disabled"),t("input#"+window.MyPrefix+j).val(n),t("input#"+window.MyPrefix+$).val(""),(b=t("select#"+window.MyPrefix+C)).html(h),b.attr("disabled","disabled"),x&&b.hasClass(k)&&(t(b).data("choicesjs").setChoices(Array.from(t(b)[0].options),"value","label",!0),t(b).data("choicesjs").disable())},data:{action:"the_ajax_hook_comu",codice_provincia:i,gcmi_filtername:g,gcmi_kind:p,nonce_ajax:gcmi_ajax.nonce},success:function(e){""!==i?(b.html(e),b.prop("disabled",!1)):b.html(w),x&&b.hasClass(k)&&(t(b).data("choicesjs").setChoices(Array.from(t(b)[0].options),"value","label",!0),t(b).data("choicesjs").enable()),t(this).prop("disabled",!1)},type:"POST",url:gcmi_ajax.ajaxurl}),t("#"+window.MyPrefix+S).hide(),t("#"+window.MyPrefix+T).hide()}),t("select[id$='"+C+"']").on("change",function(){var i="";window.MyPrefix=this.id.substring(0,this.id.length-C.length),u=t("select#"+window.MyPrefix+C+" option:selected").attr("value"),t.ajax({beforeSend:function(){p=t("input#"+window.MyPrefix+P).attr("value"),g=t("input#"+window.MyPrefix+M).attr("value"),o=t("select#"+window.MyPrefix+C+" option:selected").text(),t("input#"+window.MyPrefix+$).val(o)},data:{action:"the_ajax_hook_targa",codice_comune:u,gcmi_filtername:g,gcmi_kind:p,nonce_ajax:gcmi_ajax.nonce},success:function(e){t("input#"+window.MyPrefix+O).val(e),i="00"!==f?t("select#"+window.MyPrefix+C+" option:selected").text()+" ("+t("input#"+window.MyPrefix+O).val()+")":t("select#"+window.MyPrefix+C+" option:selected").text()+" - ("+a("sopp.","campi-moduli-italiani")+") ("+t("input#"+window.MyPrefix+O).val()+")",t("input#"+window.MyPrefix+"gcmi_formatted").attr("value",i),t("#"+window.MyPrefix+T).hide(),""!==t("select#"+window.MyPrefix+C+" option:selected").val()?t("#"+window.MyPrefix+S).show():t("#"+window.MyPrefix+S).hide()},type:"POST",url:gcmi_ajax.ajaxurl})}),t("[id$='"+S+"']").on("click",function(){window.MyPrefix=event.target.id.substring(0,event.target.id.length-S.length),u=t("select#"+window.MyPrefix+C+" option:selected").attr("value"),t.ajax({data:{action:"the_ajax_hook_info",codice_comune:u,gcmi_filtername:g,nonce_ajax:gcmi_ajax.nonce},success:function(e){e=e.trim();""!==e&&(t("#"+window.MyPrefix+T).html(e),t("#"+window.MyPrefix+T).dialog({autoOpen:!1,closeText:a("Close","campi-moduli-italiani"),height:"auto",hide:"puff",maxWidth:600,minWidth:300,show:"slide",title:a("Municipality details","campi-moduli-italiani"),width:"auto"}),t("#"+window.MyPrefix+T).dialog("open"))},type:"POST",url:gcmi_ajax.ajaxurl})}),t("[id^='TTVar']").on("mouseover",function(){event.target.id.tooltip()}),t("select[id$='"+C+"']").each(function(){var e=this.id.substring(0,this.id.length-C.length);void 0!==(d=t(this).attr("data-prval"))&&!1!==d&&!async function(e,i){try{await t("select#"+e+v).find('option[value="'+i.substring(0,2)+'"]').prop("selected",!0).trigger("change")}catch(e){console.log(e)}if("00"!==t("select#"+e+v).val())try{await t("select#"+e+_).find('option[value="'+i.substring(2,5)+'"]').prop("selected",!0).trigger("change")}catch(e){console.log(e)}try{await t("select#"+e+C).find('option[value="'+i.substring(5)+'"]').prop("selected",!0).trigger("change")}catch(e){console.log(e)}}(e,d)}),t("select[id$='"+v+"']").each(function(){window.MyPrefix=this.id.substring(0,this.id.length-v.length),2===t(this).children("option").length?(t("#"+window.MyPrefix+v+" option").eq(1).prop("selected",!0),t("#"+window.MyPrefix+v).trigger("change"),t("label[for='"+window.MyPrefix+v+"'").hide(),t(this).hide()):t(this).show()})});